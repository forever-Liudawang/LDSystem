(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fc96f9e4"],{"127c":function(t,s,e){"use strict";e("d6b7")},2253:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"album"},t._l(t.albumList,(function(s){return e("router-link",{key:s.id,staticClass:"item",attrs:{to:{path:"/album",query:{id:s.id}}}},[e("div",{staticClass:"faceImg"},[e("el-image",{attrs:{src:s.picUrl+"?param=120y120"}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"info"},[e("div",{staticClass:"album-type"},[t._v(t._s(s.type))]),s.name?e("div",{staticClass:"album-name"},[t._v(t._s(s.name))]):t._e(),s.artist?e("div",{staticClass:"artist-name"},[t._v(t._s(s.artist.name))]):t._e()])])})),1)},a=[],n={components:{},props:["albumList"],data:function(){return{}},computed:{},methods:{}},r=n,o=(e("7121"),e("2877")),c=Object(o["a"])(r,i,a,!1,null,"7e1d0986",null);s["a"]=c.exports},2824:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"singer"},[e("div",[e("div",{staticClass:"singer-info"},[e("div",{staticClass:"singer-avatar"},[e("el-image",{attrs:{src:t.artist.img1v1Url}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"singer-desc"},[e("div",{staticClass:"singer-author"},[e("div",{staticClass:"singer-name"},[t._v(t._s(t.artist.name))]),t.artist.accountId?e("router-link",{staticClass:"singer-btn singer-home",attrs:{to:{path:"/user",query:{id:t.artist.accountId}}}},[e("i",{staticClass:"iconfont icon-home"}),t._v(" 个人主页")]):t._e(),e("span",{class:["singer-btn","singer-collect",t.artist.followed?"active":""],on:{click:function(s){return t.getArtistSub(t.artist.followed?0:1)}}},[e("i",{class:["iconfont","icon-collect"+(t.artist.followed?"-active":"")]}),t._v(" "+t._s(t.artist.followed?"已收藏":"收藏"))])],1),e("div",{staticClass:"singer-brief"},[t._v(t._s(t.artist.briefDesc?t.artist.briefDesc:"暂无简介")+" "),t.introduction.length?e("span",{on:{click:t.moreDesc}},[t._v("更多>>")]):t._e()])])])]),e("div",{staticClass:"singer-main"},[e("div",[e("div",{staticClass:"singer-hd"},[e("em",[t._v("作品集")]),e("div",{staticClass:"singer-tab"},[e("span",{class:["hot"===t.type?"active":""],on:{click:function(s){return t.changeType("hot")}}},[t._v("热门作品")]),e("span",{class:["album"===t.type?"active":""],on:{click:function(s){return t.changeType("album")}}},[t._v("所有专辑")]),e("span",{class:["mv"===t.type?"active":""],on:{click:function(s){return t.changeType("mv")}}},[t._v("相关MV")])]),"hot"===t.type?e("div",{staticClass:"singer-oper"},[e("span",{staticClass:"singer-btn playAll",on:{click:t.playAllList}},[e("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")]),e("span",{staticClass:"singer-btn addAll",on:{click:t.addAll}},[e("i",{staticClass:"iconfont icon-add"}),t._v(" 添加到播放列表")]),e("span",{staticClass:"singer-btn collectAll",on:{click:t.collectAll}},[e("i",{staticClass:"iconfont icon-collect"}),t._v(" 收藏热门")])]):t._e()]),e("div",{staticClass:"singer-list"},[e("song-list",{directives:[{name:"show",rawName:"v-show",value:"hot"===t.type,expression:"type === 'hot'"}],attrs:{songList:t.hotSongs,stripe:!0}}),e("album-list",{directives:[{name:"show",rawName:"v-show",value:"album"===t.type,expression:"type === 'album'"}],attrs:{albumList:t.hotAlbums}}),e("mv-list",{directives:[{name:"show",rawName:"v-show",value:"mv"===t.type,expression:"type === 'mv'"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMv,expression:"loadMv"}],staticClass:"loadMv",attrs:{mvList:t.hotMvs,"infinite-scroll-disabled":t.isLoadMv,"infinite-scroll-distance":"20"}}),t.isLoading?[e("Loading")]:t._e()],2),"album"===t.type?e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.limit,total:t.total},on:{"current-change":t.currentChange}})],1):t._e()])]),e("el-dialog",{attrs:{title:t.artist.name,visible:t.dialogDescVisible,"destroy-on-close":!0},on:{"update:visible":function(s){t.dialogDescVisible=s}}},[e("div",{staticClass:"artist-desc-main"},[e("dl",{staticClass:"introduction"},[e("dt",[t._v("艺人介绍")]),e("dd",[t._v(t._s(t.artist.briefDesc))])]),t._l(t.introduction,(function(s,i){return e("dl",{key:i,staticClass:"introduction"},[e("dt",[t._v(t._s(s.ti))]),e("dd",[t._v(t._s(s.txt))])])}))],2)])],1)},a=[],n=e("2909"),r=e("1da1"),o=e("5530"),c=(e("d81d"),e("b0c0"),e("99af"),e("96cf"),e("2f62")),l=e("18fd"),u=e("2253"),d=e("57b7"),m=e("bf93"),v={name:"Singer",components:{songList:l["a"],albumList:u["a"],mvList:d["a"],Loading:m["a"]},data:function(){return{sUid:this.$route.query.id,artist:{},hotSongs:[],hotAlbums:[],hotMvs:[],introduction:[],type:this.$route.query.type||"hot",limit:12,offset:0,total:0,hasMoreMvs:!0,timer:null,dialogDescVisible:!1,isLoading:!0,isLoadMv:!0}},computed:Object(o["a"])({},Object(c["c"])(["playList"])),mounted:function(){this.init(),this.$route.query.type&&this.getArtists()},methods:Object(o["a"])(Object(o["a"])({},Object(c["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayListTips:"setPlayListTips",setPlayIndex:"SET_PLAYINDEX"})),{},{getArtistDesc:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var e,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$http.artistDesc({id:t.sUid,timestamp:(new Date).valueOf()});case 2:if(e=s.sent,i=e.data,200===i.code){s.next=6;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 6:t.introduction=i.introduction;case 7:case"end":return s.stop()}}),s)})))()},getArtists:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var e,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.$http.artists({id:t.sUid,timestamp:(new Date).valueOf()});case 3:if(e=s.sent,i=e.data,200===i.code){s.next=7;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 7:t.artist=i.artist,t.hotSongs=i.hotSongs.map((function(s){return{id:String(s.id),name:s.name,mvId:s.mv,singer:s.ar,album:s.al,alia:s.alia,vip:1===s.fee,license:s.license,duration:t.$utils.formatSongTime(s.dt),url:"https://music.163.com/song/media/outer/url?id=".concat(s.id,".mp3"),publishTime:t.$utils.formatMsgTime(s.publishTime)}})),t.isLoading=!1;case 10:case"end":return s.stop()}}),s)})))()},getArtistSub:function(t){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$http.artistSub({id:s.sUid,t:t});case 2:if(i=e.sent,a=i.data,200===a.code){e.next=6;break}return e.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.$msg.success("操作成功"),s.getArtists();case 8:case"end":return e.stop()}}),e)})))()},getArtistAlbum:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var e,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.$http.artistAlbum({id:t.sUid,limit:t.limit,offset:t.offset});case 3:if(e=s.sent,i=e.data,200===i.code){s.next=7;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 7:t.total=i.artist.albumSize,t.hotAlbums=i.hotAlbums,t.isLoading=!1;case 10:case"end":return s.stop()}}),s)})))()},getArtistMv:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var e,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log(t.isLoadMv),t.hasMoreMvs&&t.isLoadMv){s.next=3;break}return s.abrupt("return");case 3:return t.isLoading=!0,t.isLoadMv=!1,s.next=7,t.$http.artistMv({id:t.sUid,limit:20,offset:t.offset});case 7:if(e=s.sent,i=e.data,200===i.code){s.next=11;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 11:t.hasMoreMvs=i.hasMore,t.hotMvs=[].concat(Object(n["a"])(t.hotMvs),Object(n["a"])(i.mvs)),t.isLoading=i.hasMore,t.isLoadMv=!0,t.offset+=20;case 16:case"end":return s.stop()}}),s)})))()},loadMv:function(){this.getArtistMv()},moreDesc:function(){this.dialogDescVisible=!0},changeType:function(t){var s={id:this.sUid};switch(this.type=t,this.offset=0,this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":this.hotMvs=[],this.hasMoreMvs=!0,this.getArtistMv();break}"hot"!==t&&(s.type=this.type),this.$router.push({path:"singer",query:s})},currentChange:function(t){this.offset=(t-1)*this.limit,this.getArtistAlbum()},init:function(){switch(this.sUid=this.$route.query.id,this.getArtistDesc(),this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":break}},playAllList:function(){this.playAll({list:this.hotSongs})},addAll:function(){var t=this;this.addList({list:this.hotSongs}),this.setPlayListTips({flag:!0,txt:"已添加到播放列表"}),clearTimeout(this.timer),this.timer=setTimeout((function(){t.setPlayListTips({flag:!1,txt:"已添加到播放列表"})}),2e3)},collectAll:function(){}},Object(c["b"])(["playAll","addList"])),watch:{$route:{handler:function(){this.sUid=this.$route.query.id},deep:!0},sUid:function(t,s){this.type=this.$route.query.type||"hot",this.getArtists()}},beforeDestroy:function(){clearTimeout(this.timer)}},h=v,p=(e("364b"),e("2877")),f=Object(p["a"])(h,i,a,!1,null,"49f9a4e4",null);s["default"]=f.exports},"2cee":function(t,s,e){},"364b":function(t,s,e){"use strict";e("2cee")},"57b7":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mv"},t._l(t.mvList,(function(s,i){return e("div",{key:""+s.id+i,staticClass:"item"},[e("router-link",{staticClass:"faceImg",attrs:{to:{path:"/mv",query:{id:s.id}}}},[e("i",{staticClass:"iconfont icon-play"}),e("el-image",{attrs:{src:s.cover||s.imgurl}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("i",{staticClass:"iconfont icon-placeholder"})])])],1),e("div",{staticClass:"info"},[e("router-link",{staticClass:"mv-name",attrs:{to:{path:"/mv",query:{id:s.id}}}},[t._v(t._s(s.name))]),s.publishTime?t._e():e("router-link",{staticClass:"mv-author",attrs:{to:{path:"/singer",query:{id:s.artistId}}}},[t._v(t._s(s.artistName))]),e("div",{staticClass:"mv-playCount"},[e("i",{staticClass:"iconfont icon-video"}),t._v(" "+t._s(t.$utils.formartNum(s.playCount)))]),s.publishTime?e("div",{staticClass:"mv-time"},[t._v("发布时间："+t._s(s.publishTime))]):t._e()],1)],1)})),0)},a=[],n={components:{},props:["mvList"],data:function(){return{}},computed:{},methods:{}},r=n,o=(e("127c"),e("2877")),c=Object(o["a"])(r,i,a,!1,null,"05b0808c",null);s["a"]=c.exports},7121:function(t,s,e){"use strict";e("727c")},"727c":function(t,s,e){},d6b7:function(t,s,e){}}]);
//# sourceMappingURL=chunk-fc96f9e4.ecffd8dc.js.map