(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da36437e"],{"127c":function(t,s,i){"use strict";var e=i("d6b7"),a=i.n(e);a.a},"1f19":function(t,s,i){},"215b":function(t,s,i){"use strict";var e=i("1f19"),a=i.n(e);a.a},2253:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"album"},t._l(t.albumList,(function(s){return i("router-link",{key:s.id,staticClass:"item",attrs:{to:{path:"/album",query:{id:s.id}}}},[i("div",{staticClass:"faceImg"},[i("el-image",{attrs:{src:s.picUrl+"?param=120y120"}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[i("i",{staticClass:"iconfont icon-placeholder"})])])],1),i("div",{staticClass:"info"},[i("div",{staticClass:"album-type"},[t._v(t._s(s.type))]),s.name?i("div",{staticClass:"album-name"},[t._v(t._s(s.name))]):t._e(),s.artist?i("div",{staticClass:"artist-name"},[t._v(t._s(s.artist.name))]):t._e()])])})),1)},a=[],n={components:{},props:["albumList"],data:function(){return{}},computed:{},methods:{}},r=n,o=(i("215b"),i("2877")),c=Object(o["a"])(r,e,a,!1,null,"01e9a640",null);s["a"]=c.exports},2824:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"singer"},[i("div",{staticClass:"w1200"},[i("div",{staticClass:"singer-info"},[i("div",{staticClass:"singer-avatar"},[i("el-image",{attrs:{src:t.artist.img1v1Url}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[i("i",{staticClass:"iconfont icon-placeholder"})])])],1),i("div",{staticClass:"singer-desc"},[i("div",{staticClass:"singer-author"},[i("div",{staticClass:"singer-name"},[t._v(t._s(t.artist.name))]),t.artist.accountId?i("router-link",{staticClass:"singer-btn singer-home",attrs:{to:{path:"/user",query:{id:t.artist.accountId}}}},[i("i",{staticClass:"iconfont icon-home"}),t._v(" 个人主页")]):t._e(),i("span",{class:["singer-btn","singer-collect",t.artist.followed?"active":""],on:{click:function(s){return t.getArtistSub(t.artist.followed?0:1)}}},[i("i",{class:["iconfont","icon-collect"+(t.artist.followed?"-active":"")]}),t._v(" "+t._s(t.artist.followed?"已收藏":"收藏"))])],1),i("div",{staticClass:"singer-brief"},[t._v(t._s(t.artist.briefDesc?t.artist.briefDesc:"暂无简介")+" "),t.introduction.length?i("span",{on:{click:t.moreDesc}},[t._v("更多>>")]):t._e()])])])]),i("div",{staticClass:"singer-main"},[i("div",{staticClass:"w1200"},[i("div",{staticClass:"singer-hd"},[i("em",[t._v("作品集")]),i("div",{staticClass:"singer-tab"},[i("span",{class:["hot"===t.type?"active":""],on:{click:function(s){return t.changeType("hot")}}},[t._v("热门作品")]),i("span",{class:["album"===t.type?"active":""],on:{click:function(s){return t.changeType("album")}}},[t._v("所有专辑")]),i("span",{class:["mv"===t.type?"active":""],on:{click:function(s){return t.changeType("mv")}}},[t._v("相关MV")])]),"hot"===t.type?i("div",{staticClass:"singer-oper"},[i("span",{staticClass:"singer-btn playAll",on:{click:t.playAllList}},[i("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")]),i("span",{staticClass:"singer-btn addAll",on:{click:t.addAll}},[i("i",{staticClass:"iconfont icon-add"}),t._v(" 添加到播放列表")]),i("span",{staticClass:"singer-btn collectAll",on:{click:t.collectAll}},[i("i",{staticClass:"iconfont icon-collect"}),t._v(" 收藏热门")])]):t._e()]),i("div",{staticClass:"singer-list"},[i("song-list",{directives:[{name:"show",rawName:"v-show",value:"hot"===t.type,expression:"type === 'hot'"}],attrs:{songList:t.hotSongs,stripe:!0}}),i("album-list",{directives:[{name:"show",rawName:"v-show",value:"album"===t.type,expression:"type === 'album'"}],attrs:{albumList:t.hotAlbums}}),i("mv-list",{directives:[{name:"show",rawName:"v-show",value:"mv"===t.type,expression:"type === 'mv'"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMv,expression:"loadMv"}],staticClass:"loadMv",attrs:{mvList:t.hotMvs,"infinite-scroll-disabled":t.isLoadMv,"infinite-scroll-distance":"20"}}),t.isLoading?[i("Loading")]:t._e()],2),"album"===t.type?i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.limit,total:t.total},on:{"current-change":t.currentChange}})],1):t._e()])]),i("el-dialog",{attrs:{title:t.artist.name,visible:t.dialogDescVisible,"destroy-on-close":!0},on:{"update:visible":function(s){t.dialogDescVisible=s}}},[i("div",{staticClass:"artist-desc-main"},[i("dl",{staticClass:"introduction"},[i("dt",[t._v("艺人介绍")]),i("dd",[t._v(t._s(t.artist.briefDesc))])]),t._l(t.introduction,(function(s,e){return i("dl",{key:e,staticClass:"introduction"},[i("dt",[t._v(t._s(s.ti))]),i("dd",[t._v(t._s(s.txt))])])}))],2)])],1)},a=[],n=(i("99af"),i("d81d"),i("b0c0"),i("2909")),r=(i("96cf"),i("1da1")),o=i("5530"),c=i("2f62"),l=i("18fd"),u=i("2253"),d=i("57b7"),m=i("bf93"),v={name:"Singer",components:{songList:l["a"],albumList:u["a"],mvList:d["a"],Loading:m["a"]},data:function(){return{sUid:this.$route.query.id,artist:{},hotSongs:[],hotAlbums:[],hotMvs:[],introduction:[],type:this.$route.query.type||"hot",limit:12,offset:0,total:0,hasMoreMvs:!0,timer:null,dialogDescVisible:!1,isLoading:!0,isLoadMv:!0}},computed:Object(o["a"])({},Object(c["c"])(["playList"])),mounted:function(){this.init(),this.$route.query.type&&this.getArtists()},methods:Object(o["a"])(Object(o["a"])({},Object(c["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayListTips:"setPlayListTips",setPlayIndex:"SET_PLAYINDEX"})),{},{getArtistDesc:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,t.$http.artistDesc({id:t.sUid,timestamp:(new Date).valueOf()});case 2:if(i=s.sent,e=i.data,200===e.code){s.next=6;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 6:t.introduction=e.introduction;case 7:case"end":return s.stop()}}),s)})))()},getArtists:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.$http.artists({id:t.sUid,timestamp:(new Date).valueOf()});case 3:if(i=s.sent,e=i.data,200===e.code){s.next=7;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 7:t.artist=e.artist,t.hotSongs=e.hotSongs.map((function(s){return{id:String(s.id),name:s.name,mvId:s.mv,singer:s.ar,album:s.al,alia:s.alia,vip:1===s.fee,license:s.license,duration:t.$utils.formatSongTime(s.dt),url:"https://music.163.com/song/media/outer/url?id=".concat(s.id,".mp3"),publishTime:t.$utils.formatMsgTime(s.publishTime)}})),t.isLoading=!1;case 10:case"end":return s.stop()}}),s)})))()},getArtistSub:function(t){var s=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var e,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,s.$http.artistSub({id:s.sUid,t:t});case 2:if(e=i.sent,a=e.data,200===a.code){i.next=6;break}return i.abrupt("return",s.$msg.error("数据请求失败"));case 6:s.$msg.success("操作成功"),s.getArtists();case 8:case"end":return i.stop()}}),i)})))()},getArtistAlbum:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.isLoading=!0,s.next=3,t.$http.artistAlbum({id:t.sUid,limit:t.limit,offset:t.offset});case 3:if(i=s.sent,e=i.data,200===e.code){s.next=7;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 7:t.total=e.artist.albumSize,t.hotAlbums=e.hotAlbums,t.isLoading=!1;case 10:case"end":return s.stop()}}),s)})))()},getArtistMv:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var i,e;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(console.log(t.isLoadMv),t.hasMoreMvs&&t.isLoadMv){s.next=3;break}return s.abrupt("return");case 3:return t.isLoading=!0,t.isLoadMv=!1,s.next=7,t.$http.artistMv({id:t.sUid,limit:20,offset:t.offset});case 7:if(i=s.sent,e=i.data,200===e.code){s.next=11;break}return s.abrupt("return",t.$msg.error("数据请求失败"));case 11:t.hasMoreMvs=e.hasMore,t.hotMvs=[].concat(Object(n["a"])(t.hotMvs),Object(n["a"])(e.mvs)),t.isLoading=e.hasMore,t.isLoadMv=!0,t.offset+=20;case 16:case"end":return s.stop()}}),s)})))()},loadMv:function(){this.getArtistMv()},moreDesc:function(){this.dialogDescVisible=!0},changeType:function(t){var s={id:this.sUid};switch(this.type=t,this.offset=0,this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":this.hotMvs=[],this.hasMoreMvs=!0,this.getArtistMv();break}"hot"!==t&&(s.type=this.type),this.$router.push({path:"singer",query:s})},currentChange:function(t){this.offset=(t-1)*this.limit,this.getArtistAlbum()},init:function(){switch(this.sUid=this.$route.query.id,this.getArtistDesc(),this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":break}},playAllList:function(){this.playAll({list:this.hotSongs})},addAll:function(){var t=this;this.addList({list:this.hotSongs}),this.setPlayListTips({flag:!0,txt:"已添加到播放列表"}),clearTimeout(this.timer),this.timer=setTimeout((function(){t.setPlayListTips({flag:!1,txt:"已添加到播放列表"})}),2e3)},collectAll:function(){}},Object(c["b"])(["playAll","addList"])),watch:{$route:{handler:function(){this.sUid=this.$route.query.id},deep:!0},sUid:function(t,s){this.type=this.$route.query.type||"hot",this.getArtists()}},beforeDestroy:function(){clearTimeout(this.timer)}},h=v,p=(i("2bda"),i("2877")),f=Object(p["a"])(h,e,a,!1,null,"2e586ac4",null);s["default"]=f.exports},"2bda":function(t,s,i){"use strict";var e=i("fbf9"),a=i.n(e);a.a},"57b7":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"mv"},t._l(t.mvList,(function(s,e){return i("div",{key:""+s.id+e,staticClass:"item"},[i("router-link",{staticClass:"faceImg",attrs:{to:{path:"/mv",query:{id:s.id}}}},[i("i",{staticClass:"iconfont icon-play"}),i("el-image",{attrs:{src:s.cover||s.imgurl}},[i("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[i("i",{staticClass:"iconfont icon-placeholder"})])])],1),i("div",{staticClass:"info"},[i("router-link",{staticClass:"mv-name",attrs:{to:{path:"/mv",query:{id:s.id}}}},[t._v(t._s(s.name))]),s.publishTime?t._e():i("router-link",{staticClass:"mv-author",attrs:{to:{path:"/singer",query:{id:s.artistId}}}},[t._v(t._s(s.artistName))]),i("div",{staticClass:"mv-playCount"},[i("i",{staticClass:"iconfont icon-video"}),t._v(" "+t._s(t.$utils.formartNum(s.playCount)))]),s.publishTime?i("div",{staticClass:"mv-time"},[t._v("发布时间："+t._s(s.publishTime))]):t._e()],1)],1)})),0)},a=[],n={components:{},props:["mvList"],data:function(){return{}},computed:{},methods:{}},r=n,o=(i("127c"),i("2877")),c=Object(o["a"])(r,e,a,!1,null,"05b0808c",null);s["a"]=c.exports},d6b7:function(t,s,i){},fbf9:function(t,s,i){}}]);
//# sourceMappingURL=chunk-da36437e.b6a6150d.js.map