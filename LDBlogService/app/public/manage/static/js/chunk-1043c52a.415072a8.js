(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1043c52a"],{"126b":function(e,t,r){"use strict";r("65cb")},"1cef":function(e,t,r){"use strict";r("5a90")},2934:function(e,t,r){},"5a90":function(e,t,r){},"5c1d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"createArticle"},[r("div",[r("el-form",{ref:"articleModel",attrs:{model:e.articleModel,rules:e.rules}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"文章标题",prop:"articleTitle"}},[r("el-input",{attrs:{clearable:""},model:{value:e.articleModel.articleTitle,callback:function(t){e.$set(e.articleModel,"articleTitle",t)},expression:"articleModel.articleTitle"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"文章分类",prop:"articleCate"}},[r("el-select",{attrs:{placeholder:"请选择文章分类"},model:{value:e.articleModel.articleCate,callback:function(t){e.$set(e.articleModel,"articleCate",t)},expression:"articleModel.articleCate"}},[r("el-option",{attrs:{label:"前端技术",value:"1"}}),r("el-option",{attrs:{label:"后端技术",value:"2"}}),r("el-option",{attrs:{label:"生活随笔",value:"3"}})],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"文章简介",prop:"articleDesc"}},[r("el-input",{attrs:{clearable:"",rows:8,type:"textarea"},model:{value:e.articleModel.articleDesc,callback:function(t){e.$set(e.articleModel,"articleDesc",t)},expression:"articleModel.articleDesc"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"文章图片",prop:"coverImg"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:7001/uploadImg","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.articleModel.coverImg?r("img",{staticClass:"avatar",attrs:{src:e.articleModel.coverImg}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),r("el-col",{staticStyle:{margin:"11% 0 0 5%"},attrs:{span:4}},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("articleModel")}}},[e._v("发布文章")])],1)],1)],1)],1)],1),r("div",{staticClass:"editor"},[r("div",{ref:"editorRef",staticClass:"editorDom"})])])},l=[],i=r("5530"),c=r("1da1"),o=(r("96cf"),r("6fad")),s=r.n(o),n={data:function(){return{articleModel:{coverImg:""},rules:{articleTitle:[{required:!0,message:"请选择文章标题",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}],articleCate:[{required:!0,message:"请选择文章分类",trigger:"blur"}],articleDesc:[{required:!0,message:"请填写文章简介",trigger:"blur"},{min:5,max:40,message:"长度在 5 到 80 个字符",trigger:"blur"}],coverImg:[{required:!0,message:"请上传文章封面",trigger:"blur"}]},editor:null,imageUrl:"",uploadImgUrl:"http://110.42.186.20/uploadImg"}},mounted:function(){this.initEditor()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.$confirm("是否发布文章?","提示",{callback:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!=r){e.next=6;break}return a=t.editor.txt.html(),e.next=4,t.$http({url:"/article/createArtice",data:Object(i["a"])(Object(i["a"])({},t.articleModel),{},{content:a}),method:"post"});case 4:l=e.sent,l&&l.success&&(t.$message.success("发布成功"),t.$router.push({name:"articleList"}));case 6:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()}),e.next=6;break;case 4:return console.log("error submit!!"),e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},resetForm:function(e){this.$refs[e].resetFields()},initEditor:function(){var e=new s.a(this.$refs.editorRef);e.config.height=1e3,e.config.zIndex=10,e.config.customUploadImg=function(e,t){},e.create(),this.editor=e},handleAvatarSuccess:function(e){var t=this;console.log(e),e&&e.success&&setTimeout((function(){t.articleModel.coverImg=e.data}),1e3)},beforeAvatarUpload:function(e){console.log("file",e)}}},u=n,d=(r("126b"),r("c9d4"),r("1cef"),r("2877")),m=Object(d["a"])(u,a,l,!1,null,"be61ecd6",null);t["default"]=m.exports},"65cb":function(e,t,r){},c9d4:function(e,t,r){"use strict";r("2934")}}]);