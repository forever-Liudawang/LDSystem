(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-music-MusicPlayFull-MusicPlayFull"],{"1de5":function(t,e,a){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},2145:function(t,e,a){var i=a("ebd2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("07679424",i,!0,{sourceMap:!1,shadowMode:!1})},"281a":function(t,e,a){"use strict";var i=a("2145"),n=a.n(i);n.a},"2e64":function(t,e,a){"use strict";a("99af"),a("d3b7"),a("25f0"),a("4d90"),Object.defineProperty(e,"__esModule",{value:!0}),e.formatPlayTime=e.dateDistance=void 0;var i=function(t){var e,a,i=new Date(t),n=new Date,r=Math.floor((n-i)/1e3),s=Math.floor(r/86400);return s<1?(e=Math.floor(r%86400/3600),e<1?(a=Math.floor(r%3600/60),s%60,[a,"分钟"]):[e,"小时"]):[s,"天"]};e.dateDistance=i;var n=function(t){t|=0;var e=t/60|0,a=(t%60).toString().padStart(2,"0");return"".concat(e,":").concat(a)};e.formatPlayTime=n},"4d98":function(t,e,a){"use strict";var i=a("4ea4");a("cb29"),a("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("5530")),r=a("26cb"),s=a("61b3"),o=a("2e64"),l=i(a("c6b0")),c={components:{MusicList:l.default},data:function(){return{canvasWidth:null,formatPlayTime:o.formatPlayTime,getName:s.getName,showMusicList:!1}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,r.mapState)(["currentPlayMusic","playing","percent","audioContext","currentPlayMusic","playMode","currentPlayIndex"])),(0,r.mapGetters)(["musicPlayListLength"])),{},{playTime:function(){return this.formatPlayTime(this.currentPlayMusic.dt*this.percent/1e3)},musicTime:function(){return this.formatPlayTime(this.currentPlayMusic.dt/1e3)}}),mounted:function(){this.initProgress(this.percent)},watch:{percent:function(t){this.initProgress(t)}},methods:(0,n.default)((0,n.default)({},(0,r.mapMutations)(["changePercent","changeCurrentPlayIndex","changePlayStatus","changePlayMode"])),{},{handleBack:function(){uni.navigateBack({delta:1})},handleChangeMode:function(){1==this.playMode?(this.changePlayMode(2),uni.showToast({title:"列表循环",duration:2e3,icon:"none"})):2==this.playMode?(this.changePlayMode(3),uni.showToast({title:"单曲循环",duration:2e3,icon:"none"})):(this.changePlayMode(1),uni.showToast({title:"随机播放",duration:2e3,icon:"none"}))},handlePlayNext:function(){if(1==this.playMode){var t=Math.floor(Math.random()*this.musicPlayListLength);this.changeCurrentPlayIndex(t)}else{var e=this.currentPlayIndex+1;this.changeCurrentPlayIndex(e)}this.changePercent(0),this.changePlayStatus(!0)},handlePlayPrev:function(){if(1==this.playMode){var t=Math.floor(Math.random()*this.musicPlayListLength);this.changeCurrentPlayIndex(t)}else{var e=this.currentPlayIndex-1;this.changeCurrentPlayIndex(e)}this.changePercent(0),this.changePlayStatus(!0)},handleChangePlay:function(){this.playing?this.audioContext.pause():this.audioContext.play(),this.changePlayStatus(!this.playing)},handleMove:function(t){var e=t.touches,a=e[0],i=a.x;a.y;i<0?i=0:2.5*i>this.canvasWidth&&(i=this.canvasWidth);var n=2.5*i/this.canvasWidth;this.audioContext.seek(this.currentPlayMusic.dt*n/1e3),this.changePercent(n)},handleTouch:function(t){var e=t.touches,a=e[0],i=a.x,n=a.y;console.log(i,n),2.5*i<0?i=0:2.5*i>this.canvasWidth&&(i=this.canvasWidth);var r=2.5*i/this.canvasWidth;this.audioContext.seek(this.currentPlayMusic.dt*r/1e3),this.changePercent(r)},initProgress:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.canvasWidth)this.drawProgress(e,this.canvasWidth);else{var a=uni.createSelectorQuery().select("#lineCanvas");a.boundingClientRect((function(a){console.log(a,"data.width"),t.canvasWidth=Math.floor(a.width)-10,t.drawProgress(e,t.canvasWidth)})).exec()}},drawProgress:function(t,e){var a=uni.createCanvasContext("lineCanvas");a.clearRect(0,0,this.canvasWidth,10),a.beginPath(),a.lineWidth=4,a.setStrokeStyle("#ccc"),a.setLineCap("round"),a.moveTo(0,5),a.lineTo(e,5),a.stroke(),a.closePath();var i=t*e/2.5;a.beginPath(),a.lineWidth=4,a.setStrokeStyle("#d81e06"),a.setLineCap("round"),a.moveTo(0,5),a.lineTo(i,5),a.stroke(),a.closePath(),a.beginPath(),a.setStrokeStyle("#fff"),a.setFillStyle("#fff"),a.setLineWidth(1),a.arc(i+4,5,4,0,2*Math.PI),a.fill(),a.stroke(),a.closePath(),a.draw()}})};e.default=c},"6a9f":function(t,e,a){t.exports=a.p+"static/img/disc.2a5e9e65.png"},"7d93":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return i}));var i={uIcon:a("a623").default,uImage:a("2168").default,uPopup:a("7c92").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"musicFull h-full d-flex flex-column"},[a("v-uni-view",{staticClass:"bg",staticStyle:{background:"url(https://p1.music.126.net/e5cvcdgeosDKTDrkTfZXnQ==/109951166155165682.jpg?param=400x400)"}}),a("v-uni-view",{staticClass:"main pl-4 pr-4 pt-3 pos-rel h-full"},[a("v-uni-view",{staticClass:"header d-flex justify-between align-start"},[a("u-icon",{attrs:{name:"arrow-down",color:"#fff",size:"48"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleBack.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"d-flex flex-column text-center"},[a("v-uni-text",{staticClass:"color-white u-font-md",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.currentPlayMusic.name))]),a("v-uni-text",{staticStyle:{color:""}},[t._v(t._s(t.getName(t.currentPlayMusic.ar)))])],1),a("v-uni-view",{})],1),a("v-uni-view",{staticClass:"w-full d-flex justify-center needleBox "},[a("u-image",{class:["needle",{playing:!!t.playing}],attrs:{src:"/static/needle.png",width:"28%",mode:"widthFix"}})],1),a("v-uni-view",{staticClass:"cd mt-4 "},[a("u-image",{class:["avatar","musicActive",{musicStop:!t.playing}],attrs:{src:t.currentPlayMusic.al.picUrl+"?param=400x400",shape:"circle",width:"384upx",height:"384upx"}})],1)],1),a("v-uni-view",{staticClass:"util"},[a("v-uni-view",{staticClass:"progress w-full d-flex align-center pl-3 pr-3"},[a("v-uni-text",[t._v(t._s(t.playTime))]),a("v-uni-canvas",{staticClass:"ml-1 mr-1",staticStyle:{height:"20upx"},attrs:{"canvas-id":"lineCanvas",id:"lineCanvas"},on:{touchmove:function(e){arguments[0]=e=t.$handleEvent(e),t.handleMove.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.handleTouch.apply(void 0,arguments)}}}),a("v-uni-text",[t._v(t._s(t.musicTime))])],1),a("v-uni-view",{staticClass:"d-flex w-full justify-between pl-5 pr-5 pt-4 align-center"},[a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChangeMode.apply(void 0,arguments)}}},[1==t.playMode?a("u-image",{attrs:{src:"/static/randomWhite.png",width:"48upx",mode:"widthFix"}}):t._e(),2==t.playMode?a("u-image",{attrs:{src:"/static/listWhile.png",width:"48upx",mode:"widthFix"}}):t._e(),3==t.playMode?a("u-image",{attrs:{src:"/static/oneWhile.png",width:"48upx",mode:"widthFix"}}):t._e()],1),a("v-uni-view",{staticClass:"d-flex justify-between"},[a("u-icon",{attrs:{name:"skip-back-left",color:"#fff",size:"48"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePlayPrev.apply(void 0,arguments)}}}),a("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleChangePlay.apply(void 0,arguments)}}},[a("u-image",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],staticClass:"ml-6 mr-6",attrs:{src:"/static/stopMusic.png",width:"96upx",mode:"widthFix"}}),a("u-image",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"ml-6 mr-6",attrs:{src:"/static/playMusic.png",width:"96upx",mode:"widthFix"}})],1),a("u-icon",{attrs:{name:"skip-forward-right",color:"#fff",size:"48"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handlePlayNext.apply(void 0,arguments)}}})],1),a("u-image",{attrs:{src:"/static/list.png",width:"48upx",mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMusicList=!0}}})],1)],1),a("u-popup",{staticClass:"w-full",attrs:{mode:"bottom",height:"65%","border-radius":"14"},model:{value:t.showMusicList,callback:function(e){t.showMusicList=e},expression:"showMusicList"}},[a("MusicList")],1)],1)},r=[]},b868:function(t,e,a){"use strict";a.r(e);var i=a("7d93"),n=a("e6aa");for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);a("281a");var s,o=a("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"fde948ea",null,!1,i["a"],s);e["default"]=l.exports},cb29:function(t,e,a){var i=a("23e7"),n=a("81d5"),r=a("44d2");i({target:"Array",proto:!0},{fill:n}),r("fill")},e6aa:function(t,e,a){"use strict";a.r(e);var i=a("4d98"),n=a.n(i);for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);e["default"]=n.a},ebd2:function(t,e,a){var i=a("24fb"),n=a("1de5"),r=a("6a9f");e=i(!1);var s=n(r);e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.musicFull[data-v-fde948ea]{padding-top:0;position:relative;overflow:hidden}.musicFull .bg[data-v-fde948ea]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;opacity:.6;-webkit-filter:blur(%?40?%);filter:blur(%?40?%);background-size:cover;background-repeat:no-repeat;background-position:50%}.musicFull .main[data-v-fde948ea]{-webkit-animation:slide-in-blurred-bl-data-v-fde948ea .6s cubic-bezier(.23,1,.32,1) both;animation:slide-in-blurred-bl-data-v-fde948ea .6s cubic-bezier(.23,1,.32,1) both}.musicFull .needleBox[data-v-fde948ea]{position:absolute;left:60%;top:10%;-webkit-transform:translate(-50%);transform:translate(-50%);z-index:100}.musicFull .needle[data-v-fde948ea]{-webkit-transform-origin:%?30?% %?30?%;transform-origin:%?30?% %?30?%;-webkit-transform:rotate(-20deg);transform:rotate(-20deg);transition:-webkit-transform 1s!important;transition:transform 1s!important;transition:transform 1s,-webkit-transform 1s!important}.musicFull .needle.playing[data-v-fde948ea]{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.musicFull .cd[data-v-fde948ea]{width:75%;height:%?560?%;position:absolute;background:url('+s+") no-repeat 50%;background-size:cover;left:50%;top:52%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.musicFull .cd .avatar[data-v-fde948ea]{position:absolute;left:%?94?%;top:%?84?%}.musicFull .cd .musicActive[data-v-fde948ea]{-webkit-animation:musicAnimation-data-v-fde948ea 20s linear infinite;animation:musicAnimation-data-v-fde948ea 20s linear infinite}.musicFull .cd .musicStop[data-v-fde948ea]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes musicAnimation-data-v-fde948ea{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes musicAnimation-data-v-fde948ea{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.musicFull .musicStop[data-v-fde948ea]{-webkit-animation-play-state:paused;animation-play-state:paused}.musicFull .util[data-v-fde948ea]{height:25%;width:100%;-webkit-animation:slide-in-blurred-left-data-v-fde948ea .6s cubic-bezier(.23,1,.32,1) both;animation:slide-in-blurred-left-data-v-fde948ea .6s cubic-bezier(.23,1,.32,1) both}@-webkit-keyframes slide-in-blurred-left-data-v-fde948ea{0%{-webkit-transform:translateX(-1000px) scaleX(2.5) scaleY(.2);transform:translateX(-1000px) scaleX(2.5) scaleY(.2);-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateX(0) scaleY(1) scaleX(1);transform:translateX(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@-webkit-keyframes slide-in-blurred-bl-data-v-fde948ea{0%{-webkit-transform:translateY(1000px) scaleY(2.5) scaleX(.2);transform:translateY(1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-bl-data-v-fde948ea{0%{-webkit-transform:translateY(1000px) scaleY(2.5) scaleX(.2);transform:translateY(1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}",""]),t.exports=e}}]);