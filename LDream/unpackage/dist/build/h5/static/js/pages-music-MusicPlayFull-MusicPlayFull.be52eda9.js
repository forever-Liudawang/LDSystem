(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-music-MusicPlayFull-MusicPlayFull"],{"18a3":function(t,a,e){"use strict";e("99af"),e("d3b7"),e("25f0"),e("4d90"),Object.defineProperty(a,"__esModule",{value:!0}),a.formatPlayTime=a.dateDistance=void 0;var i=function(t){var a,e,i=new Date(t),n=new Date,r=Math.floor((n-i)/1e3),s=Math.floor(r/86400);return s<1?(a=Math.floor(r%86400/3600),a<1?(e=Math.floor(r%3600/60),s%60,[e,"分钟"]):[a,"小时"]):[s,"天"]};a.dateDistance=i;var n=function(t){t|=0;var a=t/60|0,e=(t%60).toString().padStart(2,"0");return"".concat(a,":").concat(e)};a.formatPlayTime=n},"1de5":function(t,a,e){"use strict";t.exports=function(t,a){return a||(a={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),a.hash&&(t+=a.hash),/["'() \t\n]/.test(t)||a.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},2672:function(t,a,e){"use strict";e.r(a);var i=e("5186"),n=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(a,t,(function(){return i[t]}))}(r);a["default"]=n.a},5186:function(t,a,e){"use strict";var i=e("4ea4");e("cb29"),e("ac1f"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("5530")),r=e("2f62"),s=e("00f9"),o=e("18a3"),l=i(e("47eb")),c={components:{MusicList:l.default},data:function(){return{canvasWidth:null,formatPlayTime:o.formatPlayTime,getName:s.getName,showMusicList:!1}},computed:(0,n.default)((0,n.default)((0,n.default)({},(0,r.mapState)(["currentPlayMusic","playing","percent","audioContext","currentPlayMusic","audioContext","playMode","currentPlayIndex"])),(0,r.mapGetters)(["musicPlayListLength"])),{},{playTime:function(){return this.formatPlayTime(this.currentPlayMusic.dt*this.percent/1e3)},musicTime:function(){return this.formatPlayTime(this.currentPlayMusic.dt/1e3)}}),mounted:function(){this.initProgress(this.percent)},watch:{percent:function(t){this.initProgress(t)}},methods:(0,n.default)((0,n.default)({},(0,r.mapMutations)(["changePercent","changeCurrentPlayIndex","changePlayStatus","changePlayMode"])),{},{handleBack:function(){uni.navigateBack({delta:1})},handleChangeMode:function(){1==this.playMode?(this.changePlayMode(2),uni.showToast({title:"列表循环",duration:2e3,icon:"none"})):2==this.playMode?(this.changePlayMode(3),uni.showToast({title:"单曲循环",duration:2e3,icon:"none"})):(this.changePlayMode(1),uni.showToast({title:"随机播放",duration:2e3,icon:"none"}))},handlePlayNext:function(){if(1==this.playMode){var t=Math.floor(Math.random()*this.musicPlayListLength);this.changeCurrentPlayIndex(t)}else{var a=this.currentPlayIndex+1;this.changeCurrentPlayIndex(a)}this.changePercent(0),this.changePlayStatus(!0)},handlePlayPrev:function(){if(1==this.playMode){var t=Math.floor(Math.random()*this.musicPlayListLength);this.changeCurrentPlayIndex(t)}else{var a=this.currentPlayIndex-1;this.changeCurrentPlayIndex(a)}this.changePercent(0),this.changePlayStatus(!0)},handleChangePlay:function(){this.playing?this.audioContext.pause():this.audioContext.play(),this.changePlayStatus(!this.playing)},handleMove:function(t){var a=t.touches,e=a[0],i=e.x;e.y;i<0?i=0:2.5*i>this.canvasWidth&&(i=this.canvasWidth);var n=2.5*i/this.canvasWidth;this.audioContext.seek(this.currentPlayMusic.dt*n/1e3),this.changePercent(n)},handleTouch:function(t){var a=t.touches,e=a[0],i=e.x,n=e.y;console.log(i,n),2.5*i<0?i=0:2.5*i>this.canvasWidth&&(i=this.canvasWidth);var r=2.5*i/this.canvasWidth;this.audioContext.seek(this.currentPlayMusic.dt*r/1e3),this.changePercent(r)},initProgress:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.canvasWidth)this.drawProgress(a,this.canvasWidth);else{var e=uni.createSelectorQuery().select("#lineCanvas");e.boundingClientRect((function(e){console.log(e,"data.width"),t.canvasWidth=Math.floor(e.width)-10,t.drawProgress(a,t.canvasWidth)})).exec()}},drawProgress:function(t,a){var e=uni.createCanvasContext("lineCanvas");e.clearRect(0,0,this.canvasWidth,10),e.beginPath(),e.lineWidth=4,e.setStrokeStyle("#ccc"),e.setLineCap("round"),e.moveTo(0,5),e.lineTo(a,5),e.stroke(),e.closePath();var i=t*a/2.5;e.beginPath(),e.lineWidth=4,e.setStrokeStyle("#d81e06"),e.setLineCap("round"),e.moveTo(0,5),e.lineTo(i,5),e.stroke(),e.closePath(),e.beginPath(),e.setStrokeStyle("#fff"),e.setFillStyle("#fff"),e.setLineWidth(1),e.arc(i+4,5,4,0,2*Math.PI),e.fill(),e.stroke(),e.closePath(),e.draw()}})};a.default=c},6134:function(t,a,e){var i=e("24fb"),n=e("1de5"),r=e("e14f");a=i(!1);var s=n(r);a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.musicFull[data-v-6c7416f7]{padding-top:0;position:relative;overflow:hidden}.musicFull .bg[data-v-6c7416f7]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;opacity:.6;-webkit-filter:blur(%?40?%);filter:blur(%?40?%);background-size:cover;background-repeat:no-repeat;background-position:50%}.musicFull .main[data-v-6c7416f7]{-webkit-animation:slide-in-blurred-bl-data-v-6c7416f7 .6s cubic-bezier(.23,1,.32,1) both;animation:slide-in-blurred-bl-data-v-6c7416f7 .6s cubic-bezier(.23,1,.32,1) both}.musicFull .needleBox[data-v-6c7416f7]{position:absolute;left:60%;top:10%;-webkit-transform:translate(-50%);transform:translate(-50%);z-index:100}.musicFull .needle[data-v-6c7416f7]{-webkit-transform-origin:%?30?% %?30?%;transform-origin:%?30?% %?30?%;-webkit-transform:rotate(-20deg);transform:rotate(-20deg);-webkit-transition:-webkit-transform 1s!important;transition:-webkit-transform 1s!important;transition:transform 1s!important;transition:transform 1s,-webkit-transform 1s!important}.musicFull .needle.playing[data-v-6c7416f7]{-webkit-transform:rotate(0deg);transform:rotate(0deg)}.musicFull .cd[data-v-6c7416f7]{width:75%;height:%?560?%;position:absolute;background:url('+s+") no-repeat 50%;background-size:cover;left:50%;top:52%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.musicFull .cd .avatar[data-v-6c7416f7]{position:absolute;left:%?94?%;top:%?84?%}.musicFull .cd .musicActive[data-v-6c7416f7]{-webkit-animation:musicAnimation-data-v-6c7416f7 20s linear infinite;animation:musicAnimation-data-v-6c7416f7 20s linear infinite}.musicFull .cd .musicStop[data-v-6c7416f7]{-webkit-animation-play-state:paused;animation-play-state:paused}@-webkit-keyframes musicAnimation-data-v-6c7416f7{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes musicAnimation-data-v-6c7416f7{0%{-webkit-transform:rotate(0);transform:rotate(0)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.musicFull .musicStop[data-v-6c7416f7]{-webkit-animation-play-state:paused;animation-play-state:paused}.musicFull .util[data-v-6c7416f7]{height:25%;width:100%;-webkit-animation:slide-in-blurred-left-data-v-6c7416f7 .6s cubic-bezier(.23,1,.32,1) both;animation:slide-in-blurred-left-data-v-6c7416f7 .6s cubic-bezier(.23,1,.32,1) both}@-webkit-keyframes slide-in-blurred-left-data-v-6c7416f7{0%{-webkit-transform:translateX(-1000px) scaleX(2.5) scaleY(.2);transform:translateX(-1000px) scaleX(2.5) scaleY(.2);-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateX(0) scaleY(1) scaleX(1);transform:translateX(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@-webkit-keyframes slide-in-blurred-bl-data-v-6c7416f7{0%{-webkit-transform:translateY(1000px) scaleY(2.5) scaleX(.2);transform:translateY(1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-bl-data-v-6c7416f7{0%{-webkit-transform:translateY(1000px) scaleY(2.5) scaleX(.2);transform:translateY(1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}",""]),t.exports=a},"65ba":function(t,a,e){"use strict";e.r(a);var i=e("76fa"),n=e("2672");for(var r in n)"default"!==r&&function(t){e.d(a,t,(function(){return n[t]}))}(r);e("681b");var s,o=e("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"6c7416f7",null,!1,i["a"],s);a["default"]=l.exports},"681b":function(t,a,e){"use strict";var i=e("91db"),n=e.n(i);n.a},"76fa":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return r})),e.d(a,"a",(function(){return i}));var i={uIcon:e("f2ad").default,uImage:e("8aa1").default,uPopup:e("6a94").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"musicFull h-full d-flex flex-column"},[e("v-uni-view",{staticClass:"bg",staticStyle:{background:"url(https://p1.music.126.net/e5cvcdgeosDKTDrkTfZXnQ==/109951166155165682.jpg?param=400x400)"}}),e("v-uni-view",{staticClass:"main pl-4 pr-4 pt-3 pos-rel h-full"},[e("v-uni-view",{staticClass:"header d-flex justify-between align-start"},[e("u-icon",{attrs:{name:"arrow-down",color:"#fff",size:"48"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleBack.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"d-flex flex-column text-center"},[e("v-uni-text",{staticClass:"color-white u-font-md",staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.currentPlayMusic.name))]),e("v-uni-text",{staticStyle:{color:""}},[t._v(t._s(t.getName(t.currentPlayMusic.ar)))])],1),e("v-uni-view",{})],1),e("v-uni-view",{staticClass:"w-full d-flex justify-center needleBox "},[e("u-image",{class:["needle",{playing:!!t.playing}],attrs:{src:"/static/needle.png",width:"28%",mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"cd mt-4 "},[e("u-image",{class:["avatar","musicActive",{musicStop:!t.playing}],attrs:{src:t.currentPlayMusic.al.picUrl+"?param=400x400",shape:"circle",width:"384upx",height:"384upx"}})],1)],1),e("v-uni-view",{staticClass:"util"},[e("v-uni-view",{staticClass:"progress w-full d-flex align-center pl-3 pr-3"},[e("v-uni-text",[t._v(t._s(t.playTime))]),e("v-uni-canvas",{staticClass:"ml-1 mr-1",staticStyle:{height:"20upx"},attrs:{"canvas-id":"lineCanvas",id:"lineCanvas"},on:{touchmove:function(a){arguments[0]=a=t.$handleEvent(a),t.handleMove.apply(void 0,arguments)},touchstart:function(a){arguments[0]=a=t.$handleEvent(a),t.handleTouch.apply(void 0,arguments)}}}),e("v-uni-text",[t._v(t._s(t.musicTime))])],1),e("v-uni-view",{staticClass:"d-flex w-full justify-between pl-5 pr-5 pt-4 align-center"},[e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleChangeMode.apply(void 0,arguments)}}},[1==t.playMode?e("u-image",{attrs:{src:"/static/randomWhite.png",width:"48upx",mode:"widthFix"}}):t._e(),2==t.playMode?e("u-image",{attrs:{src:"/static/listWhile.png",width:"48upx",mode:"widthFix"}}):t._e(),3==t.playMode?e("u-image",{attrs:{src:"/static/oneWhile.png",width:"48upx",mode:"widthFix"}}):t._e()],1),e("v-uni-view",{staticClass:"d-flex justify-between"},[e("u-icon",{attrs:{name:"skip-back-left",color:"#fff",size:"48"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePlayPrev.apply(void 0,arguments)}}}),e("v-uni-view",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleChangePlay.apply(void 0,arguments)}}},[e("u-image",{directives:[{name:"show",rawName:"v-show",value:t.playing,expression:"playing"}],staticClass:"ml-6 mr-6",attrs:{src:"/static/stopMusic.png",width:"96upx",mode:"widthFix"}}),e("u-image",{directives:[{name:"show",rawName:"v-show",value:!t.playing,expression:"!playing"}],staticClass:"ml-6 mr-6",attrs:{src:"/static/playMusic.png",width:"96upx",mode:"widthFix"}})],1),e("u-icon",{attrs:{name:"skip-forward-right",color:"#fff",size:"48"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePlayNext.apply(void 0,arguments)}}})],1),e("u-image",{attrs:{src:"/static/list.png",width:"48upx",mode:"widthFix"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.showMusicList=!0}}})],1)],1),e("u-popup",{staticClass:"w-full",attrs:{mode:"bottom",height:"65%","border-radius":"14"},model:{value:t.showMusicList,callback:function(a){t.showMusicList=a},expression:"showMusicList"}},[e("MusicList")],1)],1)},r=[]},"91db":function(t,a,e){var i=e("6134");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("1cd5f72f",i,!0,{sourceMap:!1,shadowMode:!1})},cb29:function(t,a,e){var i=e("23e7"),n=e("81d5"),r=e("44d2");i({target:"Array",proto:!0},{fill:n}),r("fill")},e14f:function(t,a,e){t.exports=e.p+"static/img/disc.2a5e9e65.png"}}]);