{"version":3,"sources":["webpack:///./src/views/feedback/index.vue?01d2","webpack:///./src/components/common/reply-comment.vue?c3e8","webpack:///./src/components/common/reply-comment.vue?4949","webpack:///src/components/common/reply-comment.vue","webpack:///./src/components/common/reply-comment.vue?9c34","webpack:///./src/components/common/reply-comment.vue","webpack:///./src/views/feedback/index.vue?a433","webpack:///src/views/feedback/index.vue","webpack:///./src/views/feedback/index.vue?7a6d","webpack:///./src/views/feedback/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","params","user","nickname","msg","directives","name","rawName","value","expression","attrs","domProps","on","$event","target","composing","length","maxLen","subReplyComment","staticRenderFns","component","total","userInfo","avatarUrl","slot","_e","subComment","comments","_l","item","index","key","commentId","path","query","id","userId","content","replyItem","beRepliedCommentId","$utils","formatMsgTime","time","delComment","class","liked","likeComment","likedCount","replyComment","isShowReply","replyMsg","currentChange","isEmpty","_m"],"mappings":"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","file":"js/chunk-239d4626.4ccc7256.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1a7e443e&scoped=true&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reply-comment.vue?vue&type=style&index=0&id=6a6b203a&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reply-comment\"},[_c('h3',[_vm._v(\"我回复@\"+_vm._s(_vm.params.user.nickname)+\":\")]),_c('div',{staticClass:\"comment_textarea\"},[_c('div',{staticClass:\"pre\"},[_vm._v(_vm._s(_vm.msg))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msg),expression:\"msg\"}],staticClass:\"J_inpBox inp-paragraph\",attrs:{\"name\":\"leave_msg\",\"id\":\"leave_msg\",\"placeholder\":\"期待你的神评论……\"},domProps:{\"value\":(_vm.msg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msg=$event.target.value}}})]),_c('div',{staticClass:\"comment_box_footer\"},[_c('span',{staticClass:\"comment_limit\"},[_c('em',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.msg.length))]),_vm._v(\"/\"+_vm._s(_vm.maxLen))]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"round\":\"\"},on:{\"click\":_vm.subReplyComment}},[_vm._v(\"评论\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class='reply-comment'>\r\n        <h3>我回复@{{params.user.nickname}}:</h3>\r\n        <div class=\"comment_textarea\">\r\n            <div class=\"pre\">{{msg}}</div>\r\n            <textarea class=\"J_inpBox inp-paragraph\" name=\"leave_msg\" id=\"leave_msg\" placeholder=\"期待你的神评论……\" v-model=\"msg\"></textarea>\r\n        </div>\r\n        <div class=\"comment_box_footer\">\r\n            <span class=\"comment_limit\"><em class=\"num\">{{msg.length}}</em>/{{maxLen}}</span>\r\n            <el-button type=\"primary\" size=\"mini\" round @click=\"subReplyComment\">评论</el-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: 'replyComment',\r\n    components: {},\r\n    props: ['params'],\r\n    data () {\r\n        // 这里存放数据\r\n        return {\r\n            msg: '',\r\n            maxLen: 140\r\n        }\r\n    },\r\n    // 监听属性 类似于data概念\r\n    computed: {},\r\n    // 方法集合\r\n    methods: {\r\n        subReplyComment () {\r\n            this.$emit('replyMsg', this.msg)\r\n        }\r\n    },\r\n    watch: {\r\n        msg () {\r\n            this.msg = this.maxLen >= this.msg ? this.msg : this.msg.substring(0, this.maxLen)\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.reply-comment {\r\n    padding: 10px 15px;\r\n    background: #efefef;\r\n    border-radius: 4px;\r\n\r\n    h3 {\r\n        line-height: 14px;\r\n        padding-bottom: 10px;\r\n        font-size: 14px;\r\n        font-weight: normal;\r\n        color: #999;\r\n    }\r\n}\r\n.comment_textarea {\r\n    position: relative;\r\n    border: 1px solid #e9e9e9;\r\n    border-radius: 4px;\r\n    background: #fff;\r\n}\r\n\r\n.pre {\r\n    visibility: hidden;\r\n}\r\n\r\n.inp-paragraph {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: calc(100% - 20px);\r\n    resize: none;\r\n    width: auto;\r\n    padding: 0;\r\n    border: 0;\r\n    margin: 0;\r\n    font-family: inherit;\r\n    border-radius: 0;\r\n    box-shadow: none;\r\n    overflow: hidden;\r\n}\r\n\r\n.inp-paragraph, .pre {\r\n    width: calc(100% - 30px);\r\n    padding: 10px 15px;\r\n    line-height: 24px;\r\n    min-height: 24px;\r\n    font-size: 14px;\r\n    color: #333;\r\n    border-radius: 4px;\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word\r\n}\r\n.comment_box_footer {\r\n    padding: 15px 0 0;\r\n    text-align: right;\r\n}\r\n\r\n.comment_limit {\r\n    display: inline-block;\r\n    line-height: 28px;\r\n    padding: 0 20px;\r\n    font-size: 14px;\r\n    color: #666;\r\n\r\n    em {\r\n        font-style: normal;\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reply-comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reply-comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reply-comment.vue?vue&type=template&id=6a6b203a&scoped=true&\"\nimport script from \"./reply-comment.vue?vue&type=script&lang=js&\"\nexport * from \"./reply-comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./reply-comment.vue?vue&type=style&index=0&id=6a6b203a&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a6b203a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comments\"},[_c('div',{staticClass:\"comment_hd\"},[_c('h2',[_vm._v(\"反馈\"),_c('em',[_vm._v(\"共\"+_vm._s(_vm.total)+\"条反馈评论\")])]),(_vm.userInfo)?_c('div',{staticClass:\"userInfo\"},[_c('span',[_vm._v(_vm._s(_vm.userInfo.nickname))]),_c('el-image',{staticClass:\"avatar\",attrs:{\"src\":_vm.userInfo.avatarUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])])],1):_vm._e()]),_c('el-form',{staticClass:\"comment_box\"},[_c('div',{staticClass:\"comment_textarea\"},[_c('div',{staticClass:\"pre\"},[_vm._v(_vm._s(_vm.msg))]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msg),expression:\"msg\"}],staticClass:\"J_inpBox inp-paragraph\",attrs:{\"name\":\"leave_msg\",\"id\":\"leave_msg\",\"placeholder\":\"期待你的反馈……\"},domProps:{\"value\":(_vm.msg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msg=$event.target.value}}})]),_c('div',{staticClass:\"comment_box_footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.subComment}},[_vm._v(\"反馈\")]),_c('span',{staticClass:\"comment_limit\"},[_c('em',{staticClass:\"num\"},[_vm._v(_vm._s(_vm.msg.length))]),_vm._v(\"/\"+_vm._s(_vm.maxLen))])],1)]),_c('div',{staticClass:\"comment_area\"},[(_vm.comments.length)?[_vm._l((_vm.comments),function(item,index){return _c('div',{key:item.commentId + index + '',staticClass:\"comment_item\"},[_c('router-link',{staticClass:\"comment_avatar\",attrs:{\"to\":{ path: '/user', query: { id: item.user.userId }}}},[_c('el-image',{attrs:{\"src\":item.user.avatarUrl + '?param=120y120'}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])])],1),_c('div',{staticClass:\"comment_info\"},[_c('router-link',{attrs:{\"to\":{ path: '/user', query: { id: item.user.userId }}}},[_vm._v(_vm._s(item.user.nickname))]),_c('div',{staticClass:\"comment_content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_vm._l((item.beReplied),function(replyItem){return _c('div',{key:replyItem.beRepliedCommentId,staticClass:\"comment_reply\"},[_c('router-link',{attrs:{\"to\":{ path: '/user', query: { id: replyItem.user.userId }}}},[_vm._v(_vm._s(replyItem.user.nickname))]),_vm._v(\": \"+_vm._s(replyItem.content)+\" \")],1)}),_c('div',{staticClass:\"comment_footer\"},[_c('div',{staticClass:\"comment_time\"},[_vm._v(_vm._s(_vm.$utils.formatMsgTime(item.time)))]),_c('div',{staticClass:\"comment_oper\"},[(_vm.userInfo && _vm.userInfo.userId === item.user.userId)?_c('em',{staticClass:\"comment_del\",on:{\"click\":function($event){return _vm.delComment(item)}}},[_c('i',{staticClass:\"iconfont icon-del\"})]):_vm._e(),_c('span',{class:[ item.liked ? 'active' : ''],on:{\"click\":function($event){return _vm.likeComment(item)}}},[_c('i',{staticClass:\"iconfont icon-praise\"}),_vm._v(\"(\"+_vm._s(item.likedCount)+\")\")]),_c('span',{staticClass:\"replyComment\",on:{\"click\":function($event){return _vm.replyComment(item, index)}}},[_c('i',{staticClass:\"iconfont icon-comment\"})])])]),(item.isHot)?_c('div',{staticClass:\"isHot\"},[_c('i',{staticClass:\"iconfont icon-choicest\"})]):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[(_vm.isShowReply(item, index))?_c('replyComment',{attrs:{\"params\":item},on:{\"replyMsg\":_vm.replyMsg}}):_vm._e()],1)],2)],1)}),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":this.total},on:{\"current-change\":_vm.currentChange}})],1)]:_c('div',{staticClass:\"comments_status\"},[(!_vm.isEmpty)?_c('div',{staticClass:\"loading\"},[_vm._v(\"评论加载中...\")]):_c('div',{staticClass:\"empty\"},[_vm._m(0),_c('p',[_vm._v(\"暂无反馈\")])])])],2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('i',{staticClass:\"iconfont icon-empty-main\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class='comments'>\r\n        <div class=\"comment_hd\">\r\n            <h2>反馈<em>共{{total}}条反馈评论</em></h2>\r\n            <div class=\"userInfo\" v-if=\"userInfo\">\r\n                <span>{{userInfo.nickname}}</span>\r\n                <el-image :src=\"userInfo.avatarUrl\" class=\"avatar\">\r\n                    <div slot=\"placeholder\" class=\"image-slot\">\r\n                        <i class=\"iconfont icon-placeholder\"></i>\r\n                    </div>\r\n                </el-image>\r\n            </div>\r\n        </div>\r\n        <el-form class=\"comment_box\">\r\n            <div class=\"comment_textarea\">\r\n                <div class=\"pre\">{{msg}}</div>\r\n                <textarea class=\"J_inpBox inp-paragraph\" name=\"leave_msg\" id=\"leave_msg\" placeholder=\"期待你的反馈……\" v-model=\"msg\"></textarea>\r\n            </div>\r\n            <div class=\"comment_box_footer\">\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"subComment\">反馈</el-button>\r\n                <span class=\"comment_limit\"><em class=\"num\">{{msg.length}}</em>/{{maxLen}}</span>\r\n            </div>\r\n        </el-form>\r\n        <div class=\"comment_area\">\r\n            <template v-if=\"comments.length\">\r\n                <div class=\"comment_item\" v-for=\"(item, index) in comments\" :key=\"item.commentId + index + ''\">\r\n                    <router-link :to=\"{ path: '/user', query: { id: item.user.userId }}\" class=\"comment_avatar\">\r\n                        <el-image :src=\"item.user.avatarUrl + '?param=120y120'\">\r\n                            <div slot=\"placeholder\" class=\"image-slot\">\r\n                                <i class=\"iconfont icon-placeholder\"></i>\r\n                            </div>\r\n                        </el-image>\r\n                    </router-link>\r\n                    <div class=\"comment_info\">\r\n                        <router-link :to=\"{ path: '/user', query: { id: item.user.userId }}\">{{ item.user.nickname }}</router-link>\r\n                        <div class=\"comment_content\">\r\n                            {{ item.content }}\r\n                        </div>\r\n                        <div class=\"comment_reply\" v-for=\"replyItem in item.beReplied\" :key=\"replyItem.beRepliedCommentId\">\r\n                            <router-link :to=\"{ path: '/user', query: { id: replyItem.user.userId }}\">{{ replyItem.user.nickname }}</router-link>: {{ replyItem.content }}\r\n                        </div>\r\n                        <div class=\"comment_footer\">\r\n                            <div class=\"comment_time\">{{$utils.formatMsgTime(item.time)}}</div>\r\n                            <div class=\"comment_oper\">\r\n                                <em class=\"comment_del\" v-if=\"userInfo && userInfo.userId === item.user.userId\" @click=\"delComment(item)\"><i class=\"iconfont icon-del\"></i></em>\r\n                                <span :class=\"[ item.liked ? 'active' : '']\" @click=\"likeComment(item)\"><i class=\"iconfont icon-praise\"></i>({{item.likedCount}})</span>\r\n                                <span class=\"replyComment\" @click=\"replyComment(item, index)\"><i class=\"iconfont icon-comment\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"isHot\" v-if=\"item.isHot\">\r\n                            <i class=\"iconfont icon-choicest\"></i>\r\n                        </div>\r\n                        <transition name=\"fade\" mode=\"out-in\">\r\n                            <replyComment :params=\"item\" v-if=\"isShowReply(item, index)\" @replyMsg=\"replyMsg\"></replyComment>\r\n                        </transition>\r\n                    </div>\r\n                </div>\r\n                <div class=\"pagination\">\r\n                    <el-pagination\r\n                        background\r\n                        @current-change=\"currentChange\"\r\n                        layout=\"prev, pager, next\"\r\n                        :total=\"this.total\">\r\n                    </el-pagination>\r\n                </div>\r\n            </template>\r\n            <div v-else class=\"comments_status\">\r\n                <div class=\"loading\" v-if=\"!isEmpty\">评论加载中...</div>\r\n                <div class=\"empty\" v-else>\r\n                    <p><i class=\"iconfont icon-empty-main\"></i></p>\r\n                    <p>暂无反馈</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapMutations } from 'vuex'\r\nimport replyComment from '@components/common/reply-comment'\r\nexport default {\r\n    name: 'Comments',\r\n    components: {\r\n        replyComment\r\n    },\r\n    data () {\r\n        // 这里存放数据\r\n        return {\r\n            msg: '',\r\n            maxLen: 140,\r\n            curId: '986847103',\r\n            limit: 20,\r\n            offset: 0,\r\n            before: 0,\r\n            hotComments: [],\r\n            comments: [],\r\n            total: 0,\r\n            currentPage: 0,\r\n            isEmpty: false,\r\n            replyCommentId: 0,\r\n            replyIndex: -1,\r\n            type: 2,\r\n            id: '986847103'\r\n        }\r\n    },\r\n    // 监听属性 类似于data概念\r\n    computed: {\r\n        ...mapGetters(['isLogin', 'userInfo']),\r\n        isShowReply () {\r\n            return function (item, index) {\r\n                return item.commentId === this.replyCommentId && this.replyIndex === index\r\n            }\r\n        }\r\n    },\r\n    mounted () {\r\n        this.getComment()\r\n    },\r\n    // 方法集合\r\n    methods: {\r\n        ...mapMutations(['setLoginDialog']),\r\n        // 获取页面评论\r\n        async getComment () {\r\n            const { data: res } = await this.$http.playlistComment({ id: this.id, limit: this.limit, offset: this.offset, before: this.before })\r\n            this.msgHandler(res)\r\n        },\r\n        msgHandler (res) {\r\n            if (res.code !== 200) {\r\n                return this.$msg.error('数据请求失败')\r\n            }\r\n            this.total = res.total\r\n            this.hotComments = res.hotComments || []\r\n            this.hotComments.map(item => {\r\n                item.isHot = true\r\n                return item\r\n            })\r\n            this.comments = [...this.hotComments, ...res.comments]\r\n            // 当前评论是否为空\r\n            this.isEmpty = this.before === 0 && !this.comments.length\r\n        },\r\n        // 发布/删除/回复评论\r\n        async commentHandler (t, content, commentId) {\r\n            const params = {\r\n                t: t, // 0删除 1发送 2回复\r\n                type: this.type, // 0: 歌曲 1: mv 2: 歌单 3: 专辑  4: 电台 5: 视频 6: 动态\r\n                id: this.curId, // 对应资源id\r\n                content: content, // 发送的内容/对应内容的id\r\n                commentId: commentId // 回复的评论id\r\n            }\r\n            const { data: res } = await this.$http.comment(params)\r\n\r\n            if (res.code !== 200) {\r\n                return this.$msg.error('数据请求失败')\r\n            }\r\n            this.msg = ''\r\n            this.getComment()\r\n            if (t === 0) {\r\n                this.$msg.success('删除评论成功！')\r\n            } else if (t === 1) {\r\n                this.$msg.success('评论成功！')\r\n            } else if (t === 2) {\r\n                this.$msg.success('回复评论成功！')\r\n                this.replyCommentId = 0\r\n                this.replyIndex = -1\r\n            }\r\n        },\r\n        // 发布评论\r\n        subComment () {\r\n            if (!this.isLogin) {\r\n                this.setLoginDialog(true)\r\n                return\r\n            }\r\n            this.commentHandler(1, this.msg)\r\n        },\r\n        // 删除评论\r\n        delComment (item) {\r\n            this.$msgBox.confirm('确定删除评论？', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    center: true\r\n                }).then(() => {\r\n                    this.commentHandler(0, '', item.commentId)\r\n                }).catch(() => {\r\n                })\r\n        },\r\n        // 回复评论\r\n        replyComment (item, index) {\r\n            if (!this.isLogin) {\r\n                this.setLoginDialog(true)\r\n                return\r\n            }\r\n            this.replyCommentId = (this.replyCommentId === item.commentId && this.replyIndex === index) ? 0 : item.commentId\r\n            this.replyIndex = index\r\n        },\r\n        replyMsg (msg) {\r\n            if (!this.isLogin) {\r\n                this.setLoginDialog(true)\r\n                return\r\n            }\r\n            this.commentHandler(2, msg, this.replyCommentId)\r\n        },\r\n        // 给评论点赞\r\n        async likeComment (item) {\r\n            if (!this.isLogin) {\r\n                this.setLoginDialog(true)\r\n                return\r\n            }\r\n            const { data: res } = await this.$http.commentLike({ id: this.curId, cid: item.commentId, t: Number(!item.liked), type: this.type })\r\n\r\n            if (res.code !== 200) {\r\n                return this.$msg.error('数据请求失败')\r\n            }\r\n            this.getComment()\r\n        },\r\n        // 留言分页\r\n        currentChange (page) {\r\n            this.offset = (page - 1) * this.limit\r\n            this.getComment()\r\n        }\r\n    },\r\n    watch: {\r\n        id (newVal, oldVal) {\r\n            this.curId = newVal\r\n            this.offset = 0\r\n            this.getComment()\r\n        },\r\n        msg () {\r\n            this.msg = this.maxLen >= this.msg ? this.msg : this.msg.substring(0, this.maxLen)\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.comments {\r\n    padding-top: 30px;\r\n    width: 60%;\r\n    margin: 0 auto;\r\n}\r\n\r\n.comment_hd {\r\n    display: flex;\r\n    align-items: center;\r\n    height: 60px;\r\n    font-size: 0;\r\n\r\n    h2 {\r\n        flex: 1;\r\n        font-size: 24px;\r\n        line-height: 24px;\r\n        font-weight: normal;\r\n\r\n        em {\r\n            padding-left: 20px;\r\n            font-size: 14px;\r\n            line-height: 14px;\r\n            font-style: normal;\r\n            color: #999;\r\n        }\r\n    }\r\n\r\n    .userInfo {\r\n        .avatar {\r\n            width: 30px;\r\n            height: 30px;\r\n            border-radius: 4px;\r\n            vertical-align: top;\r\n        }\r\n\r\n        span {\r\n            display: inline-block;\r\n            padding: 0 20px;\r\n            line-height: 30px;\r\n            font-size: 14px;\r\n            color: #666;\r\n        }\r\n    }\r\n}\r\n\r\n.comment_box {\r\n\r\n    .comment_textarea {\r\n        position: relative;\r\n        border: 1px solid #e9e9e9;\r\n        border-radius: 4px;\r\n        background: #fff;\r\n    }\r\n\r\n    .pre {\r\n        visibility: hidden;\r\n    }\r\n\r\n    .inp-paragraph {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        height: calc(100% - 20px);\r\n        resize: none;\r\n        width: auto;\r\n        padding: 0;\r\n        border: 0;\r\n        margin: 0;\r\n        font-family: inherit;\r\n        border-radius: 0;\r\n        box-shadow: none;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .inp-paragraph, .pre {\r\n        width: calc(100% - 30px);\r\n        padding: 10px 15px;\r\n        line-height: 24px;\r\n        min-height: 90px;\r\n        font-size: 14px;\r\n        color: #333;\r\n        border-radius: 4px;\r\n        white-space: pre-wrap;\r\n        word-wrap: break-word\r\n    }\r\n\r\n    .comment_box_footer {\r\n        display: flex;\r\n        padding: 15px 0 50px;\r\n        justify-content: space-between;\r\n    }\r\n\r\n    .comment_limit {\r\n        display: inline-block;\r\n        line-height: 28px;\r\n        padding: 0 0 0 20px;\r\n        font-size: 14px;\r\n        color: #666;\r\n\r\n        em {\r\n            font-style: normal;\r\n        }\r\n    }\r\n}\r\n\r\n.comments_status {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    min-height: 300px;\r\n\r\n    .loading {\r\n        font-size: 14px;\r\n        line-height: 24px;\r\n        color: #999;\r\n    }\r\n\r\n    .empty {\r\n        text-align: center;\r\n\r\n        p {\r\n            font-size: 14px;\r\n            line-height: 24px;\r\n            color: #999;\r\n        }\r\n\r\n        .icon-empty-main {\r\n            line-height: 140px;\r\n            font-size: 100px;\r\n            color: #bbb;\r\n            opacity: .8;\r\n        }\r\n    }\r\n}\r\n\r\n.comment_item {\r\n    position: relative;\r\n    display: flex;\r\n    padding: 15px 0;\r\n    border-bottom: 1px solid #f2f2f2;\r\n\r\n    .comment_avatar {\r\n        display: in;\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 100%;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .comment_info {\r\n        flex: 1;\r\n        padding-left: 20px;\r\n\r\n        a {\r\n            display: inline-block;\r\n            padding-bottom: 10px;\r\n            line-height: 14px;\r\n            color: #999;\r\n\r\n            &:hover {\r\n                color: @color-theme;\r\n            }\r\n        }\r\n    }\r\n\r\n    .comment_content {\r\n        line-height: 24px;\r\n    }\r\n\r\n    .comment_reply {\r\n        padding: 10px;\r\n        line-height: 28px;\r\n        margin: 5px 0;\r\n        border-radius: 4px;\r\n        color: #666;\r\n        background: #f2f2f2;\r\n\r\n        a {\r\n            display: inline-block;\r\n            line-height: 28px;\r\n            padding: 0;\r\n        }\r\n    }\r\n\r\n    .comment_footer {\r\n        display: flex;\r\n        color: #999;\r\n\r\n        .comment_time {\r\n            display: inline-block;\r\n            line-height: 28px;\r\n        }\r\n\r\n        .comment_oper {\r\n            flex: 1;\r\n            text-align: right;\r\n\r\n            span {\r\n                display: inline-block;\r\n                margin-left: 15px;\r\n                line-height: 28px;\r\n                cursor: pointer;\r\n\r\n                &.active, &.active .iconfont  {\r\n                    color: @color-theme;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .isHot {\r\n        position: absolute;\r\n        right: 0;\r\n        top: -8px;\r\n        z-index: 1;\r\n        // transform: rotate(45deg);\r\n\r\n        .icon-choicest {\r\n            font-size: 60px;\r\n            color: @color-theme;\r\n            opacity: .8;\r\n        }\r\n    }\r\n\r\n    .comment_del {\r\n        cursor: pointer;\r\n        display: none;\r\n    }\r\n\r\n    &:hover {\r\n        .comment_del {\r\n            display: inline-block;\r\n        }\r\n    }\r\n\r\n    &:last-child {\r\n        border: none;\r\n    }\r\n}\r\n\r\n.pagination {\r\n    padding: 30px 0;\r\n    text-align: center;\r\n}\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n    transition: opacity .3s;\r\n}\r\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n    opacity: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1a7e443e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1a7e443e&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a7e443e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}