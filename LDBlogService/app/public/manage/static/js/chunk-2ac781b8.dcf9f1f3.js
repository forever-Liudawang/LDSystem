(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ac781b8"],{"17fa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"articleList"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"反馈时间"}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"timestamp",placeholder:"选择日期时间"},model:{value:e.filterModel.publishTime,callback:function(t){e.$set(e.filterModel,"publishTime",t)},expression:"filterModel.publishTime"}})],1),a("el-form-item",{attrs:{label:"关键字搜索"}},[a("el-input",{attrs:{clearable:""},model:{value:e.filterModel.searchKey,callback:function(t){e.$set(e.filterModel,"searchKey",t)},expression:"filterModel.searchKey"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","show-overflow-tooltip":!0}},[a("el-table-column",{attrs:{prop:"created",label:"反馈时间",width:"160",formatter:e.dateFormat}}),a("el-table-column",{attrs:{prop:"emailAddress",label:"反馈邮箱",width:"200"}}),a("el-table-column",{attrs:{prop:"info",label:"反馈信息"}}),a("el-table-column",{attrs:{prop:"replayStatus",label:"回复状态",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.replayStatus?a("el-button",{attrs:{type:"success",size:"mini"}},[e._v("已回复")]):a("el-button",{attrs:{type:"warning",size:"mini"}},[e._v("未回复")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:{role:"admin",type:"btn"},expression:"{role:'admin',type:'btn'}"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleReplay(t.$index,t.row)}}},[e._v("回复")])]}}])})],1)],1),a("div",{staticClass:"pagation"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":e.pagation.pageSize,total:e.pagation.total},on:{"current-change":e.handlePageChange}})],1),a("el-dialog",{attrs:{title:"回复",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-input",{attrs:{type:"textarea"},model:{value:e.replayInfo,callback:function(t){e.replayInfo=t},expression:"replayInfo"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSureReplay}},[e._v("确 定")])],1)])],1)},l=[],r=a("5530"),n=a("1da1"),o=(a("96cf"),{data:function(){return{tableData:[],pagation:{curPage:0,pageSize:5,total:0},filterModel:{publishTime:"",searchKey:""},curRecommend:!1,dialogVisible:!1,curReplay:null,replayInfo:""}},mounted:function(){this.getDataList()},methods:{dateFormat:function(e,t,a,i){var l=e["created"];if(null!=l){var r=new Date(l),n=r.getFullYear(),o=r.getMonth()+1,s=r.getDate(),c=n+"-"+o+"-"+s;return c}},handlePageChange:function(e){console.log("curPage",e),this.pagation.curPage=e-1,this.getDataList()},handleReplay:function(e,t){this.curReplay=t,this.dialogVisible=!0},search:function(){this.pagation.curPage=0,this.getDataList()},handleSureReplay:function(){var e=this;this.$confirm("是否回复?","提示",{callback:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("confirm"!==a){t.next=5;break}return t.next=3,e.$http({url:"/email/sendEmail",data:{toEmail:e.curReplay.emailAddress,replayInfo:e.replayInfo,replayId:e.curReplay._id},method:"post"});case 3:i=t.sent,i&&i.success&&(e.$message.success("回复成功"),e.dialogVisible=!1,e.getDataList());case 5:case"end":return t.stop()}}),t)})));function a(e){return t.apply(this,arguments)}return a}()})},getDataList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http({url:"/email/getList",params:Object(r["a"])(Object(r["a"])({},e.filterModel),{},{pageSize:e.pagation.pageSize,pageIndex:e.pagation.curPage}),method:"get"});case 2:a=t.sent,a&&a.success&&(e.tableData=a.data||[],e.pagation.total=a.extend.total);case 4:case"end":return t.stop()}}),t)})))()}}}),s=o,c=(a("b736"),a("2877")),u=Object(c["a"])(s,i,l,!1,null,"650ae304",null);t["default"]=u.exports},b736:function(e,t,a){"use strict";a("f691")},f691:function(e,t,a){}}]);