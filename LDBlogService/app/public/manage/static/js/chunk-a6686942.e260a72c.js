(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6686942"],{"3bb1":function(e,t,a){"use strict";a("f04b")},"7ce0":function(e,t,a){"use strict";a("dfd6")},"9b0d":function(e,t,a){"use strict";a("bcb5")},bcb5:function(e,t,a){},dfd6:function(e,t,a){},f04b:function(e,t,a){},f12e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createArticle"},[a("div",[a("el-form",{ref:"articleModel",attrs:{model:e.articleModel,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文章标题",prop:"articleTitle"}},[a("el-input",{attrs:{clearable:""},model:{value:e.articleModel.articleTitle,callback:function(t){e.$set(e.articleModel,"articleTitle",t)},expression:"articleModel.articleTitle"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文章分类",prop:"articleCate"}},[a("el-select",{attrs:{placeholder:"请选择文章分类"},model:{value:e.articleModel.articleCate,callback:function(t){e.$set(e.articleModel,"articleCate",t)},expression:"articleModel.articleCate"}},[a("el-option",{attrs:{label:"前端技术",value:"1"}}),a("el-option",{attrs:{label:"后端技术",value:"2"}}),a("el-option",{attrs:{label:"生活随笔",value:"3"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"文章简介",prop:"articleDesc"}},[a("el-input",{attrs:{clearable:"",rows:2,type:"textarea"},model:{value:e.articleModel.articleDesc,callback:function(t){e.$set(e.articleModel,"articleDesc",t)},expression:"articleModel.articleDesc"}})],1),a("el-form-item",{staticClass:"tagSelect",attrs:{label:"标签分类",prop:"articleTags"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.articleModel.articleTags,callback:function(t){e.$set(e.articleModel,"articleTags",t)},expression:"articleModel.articleTags"}},e._l(e.articleTagsSelect,(function(e){return a("el-option",{key:e._id,attrs:{label:e.articleTagName,value:e.articleTagName}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[a("el-form-item",{staticStyle:{width:"60%"},attrs:{label:"文章图片",prop:"coverImg"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadImgUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.articleModel.coverImg?a("img",{staticClass:"avatar",attrs:{src:e.articleModel.coverImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-button",{staticStyle:{height:"40px"},attrs:{type:"primary"},on:{click:function(t){return e.updateArticle("articleModel")}}},[e._v("更新文章")])],1)])],1)],1)],1),a("div",{staticClass:"editor"},[a("div",{ref:"editorRef",staticClass:"editorDom"})])])},l=[],i=a("5530"),c=a("1da1"),s=(a("4de4"),a("96cf"),a("6fad")),n=a.n(s),o={data:function(){return{articleModel:{articleCate:""},rules:{articleTitle:[{required:!0,message:"请选择文章标题",trigger:"blur"},{min:5,max:40,message:"长度在 5 到 40 个字符",trigger:"blur"}],articleCate:[{required:!0,message:"请选择文章分类",trigger:"blur"}],articleDesc:[{required:!0,message:"请填写文章简介",trigger:"blur"}]},editor:null,imageUrl:"",articleId:"",uploadImgUrl:"http://110.42.186.20/uploadImg",articleTagsSelect:["Vue","React","nodejs","java","数据库","部署"]}},watch:{"articleModel.articleCate":function(e,t){console.log(e,t),this.handleGetTags(e)}},mounted:function(){var e=this.$route.params.articleId;this.articleId=e,this.getArticleById(),this.initEditor()},methods:{getArticleById:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http({url:"/article/getArticleById",params:{articleId:e.articleId},method:"get"});case 2:a=t.sent,r=a.data&&a.data[0],e.articleModel=r,e.editor.txt.append(r.content||"");case 6:case"end":return t.stop()}}),t)})))()},updateArticle:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$confirm("是否更新文章?","提示",{callback:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){var r,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"!==a){e.next=6;break}return r=t.editor.txt.html(),e.next=4,t.$http({url:"/article/updateArticle",data:Object(i["a"])(Object(i["a"])({},t.articleModel),{},{content:r}),method:"post"});case 4:l=e.sent,l&&l.success&&(t.$router.push({name:"articleList"}),t.$message.success("更新成功"));case 6:case"end":return e.stop()}}),e)})));function a(t){return e.apply(this,arguments)}return a}()})}))},resetForm:function(e){this.$refs[e].resetFields()},initEditor:function(){var e=new n.a(this.$refs.editorRef);e.config.height=1e3,e.config.zIndex=10,e.config.customUploadImg=function(e,t){},e.create(),this.editor=e},handleAvatarSuccess:function(){},beforeAvatarUpload:function(){},handleGetTags:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,l,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e>2)){a.next=3;break}return t.articleTagsSelect=[],a.abrupt("return");case 3:return a.next=5,t.$http({url:"/articleTag/getTags",method:"get"});case 5:r=a.sent,r&&r.success?(l=r.data||[],i=l.filter((function(t){return t.articleCateId==e})),t.articleTagsSelect=i):t.$message.error(r.error);case 7:case"end":return a.stop()}}),a)})))()}}},u=o,d=(a("3bb1"),a("9b0d"),a("7ce0"),a("2877")),p=Object(d["a"])(u,r,l,!1,null,"17680eae",null);t["default"]=p.exports}}]);